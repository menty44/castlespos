/** 
**	A Template for developing new terminal application
**/

#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>
/** These two files are necessary for calling CTOS API **/
#include <ctosapi.h>
#include <fcntl.h>
#include <linux/input.h>
#include "emv_cl.h"
#include "debug.h"
#include "appmain.h"
#include <unistd.h>

static int     	fd = -1;
static int     	temp_iX = -1;
static int		temp_iY = -1;
static int     	iX = -1;
static int		iY = -1;
static int 		pendown = 0;

static int     	fd2 = -1;
static int     	temp_iX2 = -1;
static int		temp_iY2 = -1;
static int     	iX2 = -1;
static int		iY2 = -1;
static int 		pendown2 = 0;

static int     	fd3 = -1;
static int     	temp_iX3 = -1;
static int		temp_iY3 = -1;
static int     	iX3 = -1;
static int		iY3 = -1;
static int 		pendown3 = 0;

BYTE    str[256];
int		TransHisCount;
int		TouchPressFlag;


BYTE	x_b[16];
BYTE	y_b[16];
BYTE	p_b[16];
BYTE	TransFlag;
BYTE	HisFlag;
BYTE	CurrentFlag;
BYTE	HisFlag2;

BYTE Dollar_Sign;

#define	d_EMVCL_UITYPE_1	d_EMVCL_UITYPE_NORMAL
#define d_EMVCL_UITYPE_2	d_EMVCL_UITYPE_EUR

struct TransactionHistory TransHis[50];

extern void ShowRtn(BYTE usY, BYTE *baMessage, ULONG ulRtn);
extern void Transaction(ULONG ul);
//------------------------------------------------------------------------------

BOOL CancelTransactionEvent2(void) {
    BYTE k;

    CTOS_KBDHit(&k);

    if (k == '1') {
        return TRUE;
    }

    return FALSE;
}
//------------------------------------------------------------------------------

void ShowMessageEvent2(BYTE bKernel, EMVCL_USER_INTERFACE_REQ_DATA *stUserInterfaceRequestData) {
    __DebugAddSTR("Enter Show Message Event");

    __DebugAddINT("Current Kernel", bKernel);
    __DebugAddHEX("Usr Req Data", (BYTE*) stUserInterfaceRequestData, sizeof (EMVCL_USER_INTERFACE_REQ_DATA));
}
//------------------------------------------------------------------------------

void TouchSensor1(void){
	ULONG   rb;
    struct  input_event ev[5];
    BYTE    count = 0;
	int		iPressure = 0;
	int		tempPressure = 0;
	int	Xbuf, Ybuf;
	BYTE	x_b[16];
	BYTE	y_b[16];
	BYTE	p_b[16];
	BYTE	key;

	if(fd < 0){
		fd = open("/dev/input/event0", O_RDONLY | O_NONBLOCK ); //To open the touch panel's event and set non-block
		if(fd < 0){
			CTOS_LCDTPrintXY(1, 10, "TouchPanel Open Fail");
			CTOS_KBDGet(&key);
			return;
		}

		if(ioctl(fd, EVIOCGNAME(sizeof(str)), str) < 0) //To get the name of this input event
		{
			CTOS_LCDTPrintXY(1, 10, "   ioctl Open Fail  ");
			goto exit;
		}
	}
	

    rb = read(fd, ev, sizeof(struct input_event) * 5);

    if ( rb < sizeof(struct input_event) )
    {
        CTOS_LCDTPrintXY(1, 10, "  Read Input Fail!  ");
        goto exit;
    }
    
    for (count = 0; count < rb/sizeof(struct input_event); count++){    
        if(EV_KEY == ev[count].type){

			if(ev[count].code == BTN_TOUCH)
			{
				if (ev[count].value == 1 )
				{
					pendown = 1;
				}
				else
				{
					pendown = 0;
					iX = -1;
					iY = -1;
				}
			}
        }
        else if(EV_ABS == ev[count].type) //absolute values to the touch panel
        {
            if(ev[count].code == 0) // code 0 is equal to X-axis's coordinate
            {
                temp_iX = ev[count].value;
            }
            else if(ev[count].code == 1) //code 1 is equal to Y-axis's coordinate
            {
                temp_iY = ev[count].value;
            }
        }
        else if(EV_SYN == ev[count].type){
            iX = temp_iX;
            iY = temp_iY;
            break;
        }
    }
	
	//memset(x_b, 0x00, sizeof(x_b));
	//memset(y_b, 0x00, sizeof(y_b));
	//memset(p_b, 0x00, sizeof(p_b));
	//sprintf(x_b, "touch_x-%03d", iX);
	//sprintf(y_b, "touch_y-%03d", iY);
	//sprintf(p_b, "pendown-%02d", pendown);
	//CTOS_LCDTPrintXY(1, 1, x_b);
	//CTOS_LCDTPrintXY(1, 2, y_b);
	//CTOS_LCDTPrintXY(1, 3, p_b);
        
    if ((iX != 0 ) && (iY != 0 ) && (pendown == 1)){
        if((iX > 60) && (iX < 260) && (iY > 190) && (iY < 230)){//60, 260, 190, 230
			TransFlag = 1;
			pendown = 0;
			close(fd);
			fd = -1;
			return;
		} 
		if((iX > 60) && (iX < 260) && (iY > 250) && (iY < 290)){//60, 260, 250, 290
			HisFlag = 1;
			pendown = 0;
			close(fd);
			fd = -1;
			return;
		} 				
    }
	
not_ready:
	return;
	
exit:
	close(fd);
	fd = -1;
    return;
	
}

void TouchSensor2(void){
	ULONG   rb;
    struct  input_event ev[5];
    BYTE    count = 0;
	int		iPressure = 0;
	int		tempPressure = 0;
	int		Xbuf, Ybuf;
	BYTE	x_b[16];
	BYTE	y_b[16];
	BYTE	p_b[16];
	BYTE	key;
	BYTE	buf[32];

	if(fd2 < 0){
		fd2 = open("/dev/input/event0", O_RDONLY | O_NONBLOCK ); //To open the touch panel's event and set non-block
		if(fd2 < 0){
			CTOS_LCDTPrintXY(1, 10, "TouchPanel Open Fail");
			CTOS_KBDGet(&key);
			return;
		}

		if(ioctl(fd2, EVIOCGNAME(sizeof(str)), str) < 0) //To get the name of this input event
		{
			CTOS_LCDTPrintXY(1, 10, "   ioctl Open Fail  ");
			goto exit;
		}
	}
	

    rb = read(fd2, ev, sizeof(struct input_event) * 5);

    if ( rb < sizeof(struct input_event) )
    {
        CTOS_LCDTPrintXY(1, 10, "  Read Input Fail!  ");
        goto exit;
    }
    
    for (count = 0; count < rb/sizeof(struct input_event); count++){    
        if(EV_KEY == ev[count].type){

			if(ev[count].code == BTN_TOUCH)
			{
				if (ev[count].value == 1 )
				{
					pendown2 = 1;
				}
				else
				{
					pendown2 = 0;
					iX2 = -1;
					iY2 = -1;
				}
			}
        }
        else if(EV_ABS == ev[count].type) //absolute values to the touch panel
        {
            if(ev[count].code == 0) // code 0 is equal to X-axis's coordinate
            {
                temp_iX2 = ev[count].value;
            }
            else if(ev[count].code == 1) //code 1 is equal to Y-axis's coordinate
            {
                temp_iY2 = ev[count].value;
            }
        }
        else if(EV_SYN == ev[count].type){
            iX2 = temp_iX2;
            iY2 = temp_iY2;
            break;
        }
    }
	
	//memset(x_b, 0x00, sizeof(x_b));
	//memset(y_b, 0x00, sizeof(y_b));
	//memset(p_b, 0x00, sizeof(p_b));
	//sprintf(x_b, "touch_x-%03d", iX2);
	//sprintf(y_b, "touch_y-%03d", iY2);
	//sprintf(p_b, "pendown-%02d", pendown2);
	//CTOS_LCDTPrintXY(1, 1, x_b);
	//CTOS_LCDTPrintXY(1, 2, y_b);
	//CTOS_LCDTPrintXY(1, 3, p_b);

	CurrentFlag = 0;
        
    if ((iX2 != 0 ) && (iY2 != 0 ) && (pendown2 == 1)){
        if((iX2 > 115) && (iX2 < 205) && (iY2 > 400) && (iY2 < 460)){//0
			TouchPressFlag = 1;
			CurrentFlag = 0x10;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 
		if((iX2 > 25) && (iX2 < 115) && (iY2 > 220) && (iY2 < 280)){//1
			TouchPressFlag = 1;
			CurrentFlag = 0x01;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 
		if((iX2 > 115) && (iX2 < 205) && (iY2 > 220) && (iY2 < 280)){//2
			TouchPressFlag = 1;
			CurrentFlag = 0x02;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 		
		if((iX2 > 205) && (iX2 < 295) && (iY2 > 220) && (iY2 < 280)){//3
			TouchPressFlag = 1;
			CurrentFlag = 0x03;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 		
		if((iX2 > 25) && (iX2 < 115) && (iY2 > 280) && (iY2 < 340)){//4
			TouchPressFlag = 1;
			CurrentFlag = 0x04;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 		
		if((iX2 > 115) && (iX2 < 205) && (iY2 > 280) && (iY2 < 340)){//5
			TouchPressFlag = 1;
			CurrentFlag = 0x05;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 		
		if((iX2 > 205) && (iX2 < 295) && (iY2 > 280) && (iY2 < 340)){//6
			TouchPressFlag = 1;
			CurrentFlag = 0x06;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 		
		if((iX2 > 25) && (iX2 < 115) && (iY2 > 340) && (iY2 < 400)){//7
			TouchPressFlag = 1;
			CurrentFlag = 0x07;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 		
		if((iX2 > 115) && (iX2 < 205) && (iY2 > 340) && (iY2 < 400)){//8
			TouchPressFlag = 1;
			CurrentFlag = 0x08;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 		
		if((iX2 > 205) && (iX2 < 295) && (iY2 > 340) && (iY2 < 400)){//9
			TouchPressFlag = 1;
			CurrentFlag = 0x09;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 		
		if((iX2 > 25) && (iX2 < 115) && (iY2 > 400) && (iY2 < 460)){//backspace
			TouchPressFlag = 1;
			CurrentFlag = 0x11;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 		
		if((iX2 > 205) && (iX2 < 295) && (iY2 > 400) && (iY2 < 460)){//enter
			TouchPressFlag = 1;
			CurrentFlag = 0x12;
			pendown2 = 0;
			close(fd2);
			fd2 = -1;
			return;
		} 		
    }
	
not_ready:
	return;
	
exit:
	close(fd2);
	fd2 = -1;
    return;
	
}

void TouchSensor3(void){
	ULONG   rb;
    struct  input_event ev[5];
    BYTE    count = 0;
	int		iPressure = 0;
	int		tempPressure = 0;
	int		Xbuf, Ybuf;
	BYTE	x_b[16];
	BYTE	y_b[16];
	BYTE	p_b[16];
	BYTE	key;

	if(fd3 < 0){
		fd3 = open("/dev/input/event0", O_RDONLY | O_NONBLOCK ); //To open the touch panel's event and set non-block
		if(fd3 < 0){
			CTOS_LCDTPrintXY(1, 10, "TouchPanel Open Fail");
			CTOS_KBDGet(&key);
			return;
		}

		if(ioctl(fd3, EVIOCGNAME(sizeof(str)), str) < 0) //To get the name of this input event
		{
			CTOS_LCDTPrintXY(1, 10, "   ioctl Open Fail  ");
			goto exit;
		}
	}
	

    rb = read(fd3, ev, sizeof(struct input_event) * 5);

    if ( rb < sizeof(struct input_event) )
    {
        CTOS_LCDTPrintXY(1, 10, "  Read Input Fail!  ");
        goto exit;
    }
    
    for (count = 0; count < rb/sizeof(struct input_event); count++){    
        if(EV_KEY == ev[count].type){

			if(ev[count].code == BTN_TOUCH)
			{
				if (ev[count].value == 1 )
				{
					pendown3 = 1;
				}
				else
				{
					pendown3 = 0;
					iX3 = -1;
					iY3 = -1;
				}
			}
        }
        else if(EV_ABS == ev[count].type) //absolute values to the touch panel
        {
            if(ev[count].code == 0) // code 0 is equal to X-axis's coordinate
            {
                temp_iX3 = ev[count].value;
            }
            else if(ev[count].code == 1) //code 1 is equal to Y-axis's coordinate
            {
                temp_iY3 = ev[count].value;
            }
        }
        else if(EV_SYN == ev[count].type){
            iX3 = temp_iX3;
            iY3 = temp_iY3;
            break;
        }
    }
	
	//memset(x_b, 0x00, sizeof(x_b));
	//memset(y_b, 0x00, sizeof(y_b));
	//memset(p_b, 0x00, sizeof(p_b));
	//sprintf(x_b, "touch_x-%03d", iX3);
	//sprintf(y_b, "touch_y-%03d", iY3);
	//sprintf(p_b, "pendown-%02d", pendown3);
	//CTOS_LCDTPrintXY(1, 1, x_b);
	//CTOS_LCDTPrintXY(1, 2, y_b);
	//CTOS_LCDTPrintXY(1, 3, p_b);
	HisFlag2 = 0;
        
    if ((iX3 != 0 ) && (iY3 != 0 ) && (pendown3 == 1)){
        if((iX3 > 60) && (iX3 < 260) && (iY3 > 160) && (iY3 < 200)){//LastTrans
			HisFlag2 = 0x01;
			pendown3 = 0;
			close(fd3);
			fd3 = -1;
			return;
		} 
		if((iX3 > 60) && (iX3 < 260) && (iY3 > 210) && (iY3 < 250)){//TransBL
			HisFlag2 = 0x02;
			pendown3 = 0;
			close(fd3);
			fd3 = -1;
			return;
		} 		
		if((iX3 > 60) && (iX3 < 260) && (iY3 > 260) && (iY3 < 300)){//TransBTBLT
			HisFlag2 = 0x03;
			pendown3 = 0;
			close(fd3);
			fd3 = -1;
			return;
		} 
		if((iX3 > 60) && (iX3 < 260) && (iY3 > 310) && (iY3 < 350)){//MainMenu
			HisFlag2 = 0x04;
			pendown3 = 0;
			close(fd3);
			fd3 = -1;
			return;
		} 		
    }
	
not_ready:
	return;
	
exit:
	close(fd3);
	fd3 = -1;
    return;
	
}
//------------------------------------------------------------------------------

BOOL TouchSensorEx(int ix_start, int ix_end, int iy_start, int iy_end){
    ULONG   rb;
    struct  input_event ev[5];
    BYTE    count = 0;
	int		iPressure = 0;
	int		tempPressure = 0;

	pendown = 0;  
	iX = iY = 0;
	temp_iX = temp_iY = 0;
    rb = read(fd, ev, sizeof(struct input_event) * 5);

    if ( rb < sizeof(struct input_event) )
    {
        CTOS_LCDTPrintXY(1, 10, "  Read Input Fail!  ");
        close(fd);
        return 0;
    }
    
    for (count = 0; count < rb/sizeof(struct input_event); count++){    
        if(EV_KEY == ev[count].type){
			
			if(ev[count].code == BTN_TOUCH)
			{
				if (ev[count].value == 1 )
				{
					pendown = 1;
				}
				else
				{
					pendown = 0;
					iX = -1;
					iY = -1;
				}
			}

        }
        if(EV_ABS == ev[count].type) //absolute values to the touch panel
        {
            if(ev[count].code == 0) // code 0 is equal to X-axis's coordinate
            {
                temp_iX = ev[count].value;
            }
            else if(ev[count].code == 1) //code 1 is equal to Y-axis's coordinate
            {
                temp_iY = ev[count].value;
            }
			else if(ev[count].code == ABS_PRESSURE){
				tempPressure = ev[count].value;
			}
        }
        if(EV_SYN == ev[count].type){
            iX = temp_iX;
            iY = temp_iY;
			iPressure = tempPressure;
            break;
        }
    }
        
    if ((iX != 0 ) && (iY != 0 ) && (pendown == 1)){//
        if((iX > ix_start) && (iX < ix_end) && (iY > iy_start) && (iY < iy_end)){
			TouchPressFlag = 1;
			return TRUE;
		} 
    }
	
    return FALSE;
}

void TouchOpen(void){
    BYTE key;
    iX = 0, iY = 0;
    temp_iX = 0, temp_iY = 0;
    
    fd = open("/dev/input/event0", O_RDONLY | O_NONBLOCK ); //To open the touch panel's event and set non-block
    if(fd < 0){
        CTOS_LCDTPrintXY(1, 10, "TouchPanel Open Fail");
        CTOS_KBDGet(&key);
        return;
    }

    if(ioctl(fd, EVIOCGNAME(sizeof(str)), str) < 0) //To get the name of this input event
    {
        CTOS_LCDTPrintXY(1, 10, "   ioctl Open Fail  ");
        CTOS_KBDGet(&key);
        return;
    }
}

void ShowAmount(char * cAmount){
	BYTE bAmt_Dec[3] = {0};
    int Len = strlen(cAmount);

	//CTOS_LCDTPrintXY(1, 7, "   $          0.00  ");
	if(Dollar_Sign == 1)
		CTOS_LCDTPrintXY(1, 7, "   $          0.00  ");
	else if(Dollar_Sign == 2)
		CTOS_LCDTPrintXY(1, 7, "   €         0.00  ");
	
	if(Len <= 2){
		//CTOS_LCDTPrintXY((19 - Len), 7, cAmount);
		
		if(Dollar_Sign == 1)
			CTOS_LCDTPrintXY((19 - Len), 7, cAmount);
		else if(Dollar_Sign == 2)
			CTOS_LCDTPrintXY((18 - Len), 7, cAmount);
	}else{
		bAmt_Dec[0] = cAmount[Len-2];
		bAmt_Dec[1] = cAmount[Len-1];
		//CTOS_LCDTPrintXY((19 - Len - 1), 7, cAmount);
		//CTOS_LCDTPrintXY(16, 7, ".");
		//CTOS_LCDTPrintXY(17, 7, bAmt_Dec);
		
		if(Dollar_Sign == 1){
			CTOS_LCDTPrintXY((19 - Len - 1), 7, cAmount);
			CTOS_LCDTPrintXY(16, 7, ".");
			CTOS_LCDTPrintXY(17, 7, bAmt_Dec);
		}
		else if(Dollar_Sign == 2){
			CTOS_LCDTPrintXY((18 - Len - 1), 7, cAmount);
			CTOS_LCDTPrintXY(15, 7, ".");
			CTOS_LCDTPrintXY(16, 7, bAmt_Dec);
		}
	}
}

void DigitFull(void){
    CTOS_Beep();
    CTOS_Delay(500);
    CTOS_Beep();
	
	/*
	CTOS_LCDTPrintXY(2, 7, "Reach max digit!");
    CTOS_Beep();
    CTOS_Delay(1000);
    CTOS_Beep();

    CTOS_LCDGShowBMPPic(0, 0, "TransInput_.bmp");
	CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
	CTOS_LCDTPrintXY(1, 7, "   $                ");
	CTOS_LCDTPrintXY(1, 7, "   $          0.00  ");
	
	EMVCL_ShowVirtualLED(NULL);
	EMVCL_SetLED(0x0F, 0x08);
	*/
}

static const BYTE baPrinterBufferLogo_Receipt3[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0xC0, 0xC0, 0xE0, 0xE0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF8,
    0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0x78, 0x78, 0x7C, 0x78, 0x78, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8,
    0xF8, 0xF0, 0xF0, 0xF0, 0xE0, 0xE0, 0xC0, 0xC0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xE0, 0xF8, 0xFE, 0xFF, 0xFF, 0xFC, 0xF8,
    0xE0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x80, 0x80, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0x80, 0x80,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0,
    0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xC0, 0xC0,
    0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0,
    0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80,
    0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0,
    0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0,
    0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0xC0,
    0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xE0, 0xF0, 0xF8,
    0xF8, 0xFC, 0x7E, 0x3F, 0x1F, 0x1F, 0x0F, 0x07, 0x07, 0x87, 0x83, 0xC3, 0xC1, 0xE1, 0xE1, 0xE0,
    0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF8, 0xF8, 0xF8, 0xF8, 0xF8, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xE0,
    0xE0, 0xE1, 0xC1, 0xC1, 0x83, 0x83, 0x07, 0x07, 0x0F, 0x1F, 0x1F, 0x3F, 0x7E, 0xFC, 0xFC, 0xF8,
    0xF0, 0xE0, 0xC0, 0x80, 0x80, 0xE0, 0xF8, 0xFE, 0xFF, 0xFF, 0x3F, 0x0F, 0x07, 0x03, 0x07, 0x1F,
    0x3F, 0xFF, 0xFF, 0xFC, 0xF0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xE0, 0xF8, 0xFC,
    0xFE, 0xFF, 0xFF, 0x7F, 0x3F, 0x1F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x1F, 0x3F, 0x7F, 0xFF,
    0xFF, 0xFF, 0xFE, 0xFC, 0xF0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xE0, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF8,
    0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0,
    0xF8, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x1F, 0x3F,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xF8, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x0F, 0x0F,
    0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x0F, 0x0F, 0x0F,
    0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F,
    0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xFC, 0xFE, 0xFF, 0xFF, 0xFF, 0x1F,
    0x1F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x1F, 0x3F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xF8, 0xE0,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xE0, 0xF8, 0xFC, 0xFF, 0x7F, 0x3F, 0x0F, 0x07, 0x03,
    0x01, 0xC0, 0xE0, 0xF0, 0xF8, 0xFC, 0xFE, 0x7E, 0x3F, 0x1F, 0x0F, 0x0F, 0x07, 0x07, 0x03, 0x83,
    0x83, 0xC1, 0xC1, 0xC1, 0xC1, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE1, 0xC1, 0xC1, 0xC1, 0x81, 0x83,
    0x03, 0x07, 0x07, 0x07, 0x0F, 0x1F, 0x3F, 0x7F, 0xFE, 0xFC, 0xF8, 0xF0, 0xE0, 0xC0, 0x81, 0x03,
    0xC7, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F, 0x0F, 0x03, 0x00, 0x80, 0xE0, 0xF0, 0xF8, 0xE0, 0xC0,
    0x00, 0x00, 0x03, 0x07, 0x1F, 0x7F, 0xFF, 0xFE, 0xFC, 0xF0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
    0x03, 0x03, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0xC0, 0xF8, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F, 0x01, 0x00, 0x07, 0x3F, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFE, 0xF0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03,
    0x1F, 0x3F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFE, 0xFC, 0xF8, 0xF8, 0xF8, 0xF8, 0xF0, 0xF0, 0xF0, 0xE0,
    0xE1, 0xC1, 0xC1, 0x81, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x3F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFE,
    0xFC, 0xF8, 0xF8, 0xF8, 0xF8, 0xF0, 0xF0, 0xF0, 0xE0, 0xE0, 0xE1, 0xC1, 0x81, 0x81, 0x01, 0x01,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0xC0, 0xF8, 0xFE, 0xFF, 0xFF, 0x3F, 0x07, 0x01, 0x00, 0x00, 0xE0, 0xF8, 0xFE,
    0xFF, 0xFF, 0x3F, 0x0F, 0x03, 0x01, 0x00, 0x80, 0xE0, 0xF0, 0xF8, 0xFC, 0xFE, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0x7F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFE, 0xFE, 0xFC, 0xF8, 0xE0, 0xC0, 0x00, 0x01, 0x03, 0x0F, 0xDF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0x1F, 0x0F, 0x03, 0x00, 0x80, 0xE0, 0xF8, 0xFC, 0xFF, 0xFF, 0x3F, 0x1F, 0x7F, 0xFF,
    0xFF, 0xFC, 0xF0, 0xE0, 0x80, 0x00, 0x01, 0x03, 0x0F, 0x1F, 0x7F, 0xFF, 0xFE, 0xF8, 0xE0, 0xC0,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80,
    0xE0, 0xC0, 0xC0, 0xC0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xF0,
    0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF7, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF1, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFC, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0,
    0xC0, 0xC0, 0xC0, 0xC0, 0xC1, 0x01, 0x03, 0x03, 0x03, 0x07, 0x07, 0x07, 0x0F, 0x0F, 0x0F, 0x1F,
    0x1F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFC, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x03,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC1, 0x01, 0x03,
    0x03, 0x03, 0x07, 0x07, 0x07, 0x0F, 0x0F, 0x0F, 0x1F, 0x1F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFC,
    0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0x03, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0xFF, 0xFF, 0xFF,
    0x0F, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xC1, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC1, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFC, 0xFE, 0xFF, 0xFF, 0x7F, 0x1F, 0x07,
    0x01, 0x00, 0x80, 0xE0, 0xF8, 0xFE, 0xFF, 0x7F, 0x3F, 0x0F, 0x03, 0x00, 0x80, 0x80, 0x00, 0x00,
    0x03, 0x07, 0x1F, 0x7F, 0xFF, 0xFE, 0xFC, 0xF0, 0xC0, 0x80, 0x00, 0x01, 0x07, 0x1F, 0x3F, 0xFF,
    0xFF, 0xFC, 0xF0, 0xE0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x0F, 0x3F, 0x7F,
    0xFF, 0xFF, 0xFF, 0xFC, 0xF8, 0xF0, 0xF0, 0xE0, 0xE0, 0xE0, 0xE0, 0xF0, 0xF0, 0xF8, 0xFE, 0xFF,
    0xFF, 0xFF, 0x7F, 0x3F, 0x0F, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xFC, 0xFF, 0xFF,
    0xFF, 0xFF, 0x7F, 0x0F, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03,
    0x03, 0x1F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xF8, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F,
    0x3F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFE, 0xF8, 0xF0, 0xF0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xF0, 0xF0,
    0xF8, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0x1F, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0,
    0xF0, 0xF0, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0,
    0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x3F, 0x7F, 0xFF, 0xFF, 0xFF, 0xFE, 0xFC,
    0xF0, 0xF0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xF0, 0xF0, 0xF8, 0xFE, 0xFF, 0xFF, 0xFF, 0x7F, 0x1F,
    0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x3F, 0xFF, 0xFF, 0xFF, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF,
    0xE0, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0x1F, 0x07, 0x01, 0x00, 0x80, 0xE0,
    0xF8, 0xFE, 0xFF, 0x7F, 0x1F, 0x07, 0x03, 0x00, 0x00, 0xE0, 0xF8, 0xFE, 0xFF, 0xFF, 0xFE, 0xF8,
    0xF0, 0xC0, 0x00, 0x00, 0x00, 0x03, 0x0F, 0x3F, 0x7F, 0xFF, 0xFE, 0xF8, 0xF0, 0xC0, 0x00, 0x00,
    0x03, 0x07, 0x1F, 0x7F, 0xFF, 0xFE, 0xFC, 0xF0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x01, 0x01, 0x03, 0x03, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x03, 0x03, 0x03,
    0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x03, 0x03,
    0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x01, 0x03, 0x03, 0x03, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,
    0x03, 0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03,
    0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03,
    0x03, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03,
    0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03,
    0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x03, 0x03,
    0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x03, 0x03, 0x03, 0x01, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x03, 0x1F, 0xFF, 0xFF, 0xFF, 0xFC, 0xE0, 0x80, 0x00, 0x00, 0x07, 0x1F, 0x7F,
    0xFF, 0xFF, 0xF8, 0xF0, 0xC0, 0x80, 0x00, 0x03, 0x07, 0x1F, 0x3F, 0x3F, 0x7F, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    0xFF, 0xFF, 0xFF, 0x7F, 0x3F, 0x1F, 0x0F, 0x03, 0x00, 0x00, 0xC0, 0xE0, 0xF8, 0xFE, 0xFF, 0x3F,
    0x1F, 0x07, 0x01, 0x00, 0x00, 0xC0, 0xF0, 0xFE, 0xFF, 0xFF, 0x3F, 0x0F, 0x03, 0x01, 0x07, 0x0F,
    0x3F, 0x7F, 0xFF, 0xFE, 0xF8, 0xE0, 0xC0, 0x00, 0x00, 0x01, 0x07, 0x0F, 0x3F, 0xFF, 0xFF, 0xFE,
    0xF8, 0xE0, 0x80, 0x00, 0x00, 0x03, 0x0F, 0x1F, 0x7F, 0xFF, 0xFE, 0xF8, 0xF0, 0xC0, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xF0, 0xF0, 0xF0, 0xF0,
    0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0x00, 0x00, 0x00, 0x00,
    0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xE0,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xE0, 0xE0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0,
    0xF0, 0xE0, 0xE0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xF0, 0xF0, 0xF0, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xF0, 0xF0, 0xF0, 0xE0, 0x00, 0x00, 0x00, 0x00,
    0x00, 0xE0, 0xF0, 0xF0, 0xF0, 0xF0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0xF0,
    0xF0, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xE0, 0xE0, 0xF0, 0xF0, 0xF0,
    0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xE0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xF0, 0xF0, 0xF0, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xE0, 0xE0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xE0,
    0xE0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xE0, 0xE0,
    0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xF0, 0xE0, 0xE0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x70, 0xF0, 0xF0, 0xF0, 0xE0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xF0, 0xF0,
    0xF0, 0xF0, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x0F, 0x1F, 0x7F, 0xFF, 0xFE, 0xFC, 0xF0, 0xE0, 0xC0,
    0x80, 0x03, 0x07, 0x0F, 0x1F, 0x3F, 0x3F, 0x7E, 0xFC, 0xF8, 0xF0, 0xF0, 0xE0, 0xE0, 0xC1, 0xC1,
    0x83, 0x83, 0x83, 0x83, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x83, 0x83, 0x83, 0xC1,
    0xC1, 0xC0, 0xE0, 0xE0, 0xF0, 0xF8, 0xF8, 0x7C, 0x7E, 0x3F, 0x1F, 0x0F, 0x03, 0x01, 0x00, 0xC0,
    0xE0, 0xF0, 0xF8, 0xFE, 0xFF, 0x7F, 0x3F, 0x0F, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x01, 0x07, 0x0F, 0x3F, 0xFF, 0xFF, 0xFC, 0xF8, 0xE0, 0xC0, 0x00, 0x00, 0x03, 0x07,
    0x1F, 0x7F, 0xFF, 0xFF, 0xFC, 0xF0, 0xE0, 0x80, 0x00, 0x01, 0x03, 0x0F, 0x3F, 0xFF, 0xFF, 0xFC,
    0xF8, 0xE0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xFF, 0xFF, 0xFF, 0xFF, 0xE1, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xC0, 0x00,
    0x00, 0x00, 0x00, 0x00, 0xF8, 0xFE, 0xFF, 0xFF, 0xFF, 0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00,
    0x01, 0x07, 0x0F, 0x07, 0x07, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xE0,
    0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00,
    0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x1F, 0x7F, 0xFF, 0xFC, 0xF0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0xFF,
    0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0x0F, 0x03, 0x01, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0xFF, 0xFF, 0xFF, 0xFC, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0xFC, 0xFF, 0xFF, 0xFF, 0x0F, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03,
    0x07, 0xFF, 0xFF, 0xFF, 0xFC, 0xE0, 0x00, 0x00, 0x00, 0x80, 0xFC, 0xFF, 0xFF, 0xFF, 0x0F, 0x03,
    0x01, 0x00, 0x00, 0x00, 0x80, 0x80, 0x81, 0x83, 0x87, 0x87, 0x87, 0x87, 0x80, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x01, 0x03, 0x1F, 0x3F, 0xFF, 0xFE, 0xF8, 0xE0, 0xF0, 0xFC, 0xFF, 0x7F, 0x1F, 0x07,
    0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x0F, 0x1F,
    0x3F, 0x7F, 0x7E, 0xFC, 0xF8, 0xF8, 0xF0, 0xE0, 0xE0, 0xC1, 0xC1, 0x83, 0x83, 0x87, 0x07, 0x07,
    0x0F, 0x0F, 0x0F, 0x0F, 0x1F, 0x1F, 0x1F, 0x1F, 0x1F, 0x1F, 0x1F, 0x1F, 0x0F, 0x0F, 0x0F, 0x0F,
    0x07, 0x87, 0x83, 0x83, 0xC3, 0xC1, 0xE0, 0xE0, 0xF0, 0xF0, 0xF8, 0xFC, 0x7E, 0x7E, 0x3F, 0x1F,
    0x0F, 0x07, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x07, 0x0F, 0x3F, 0xFF, 0xFF, 0xFC, 0xF0, 0xE0,
    0x80, 0x00, 0x00, 0x03, 0x07, 0x1F, 0x7F, 0xFF, 0xFE, 0xFC, 0xF0, 0xC0, 0x80, 0x00, 0x01, 0x07,
    0x1F, 0x3F, 0xFF, 0xFE, 0xFC, 0xF0, 0xE0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xFF, 0xFF, 0xFF, 0xFF, 0x83, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x01, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x1F, 0x7F, 0xFF, 0xFF, 0xFF, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x80, 0xE0, 0xF8, 0xF0, 0xF0, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x03,
    0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00,
    0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x01, 0x07, 0x0F, 0x7F, 0xFF, 0xFE, 0xFC, 0xFF, 0xFF,
    0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xFF, 0xFF, 0xFF, 0xF0, 0xC0, 0x80, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x80, 0xC0, 0xE0, 0xFF, 0xFF, 0xFF, 0x3F, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x3F, 0xFF, 0xFF, 0xFF, 0xF0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0,
    0xE0, 0xFF, 0xFF, 0xFF, 0x3F, 0x07, 0x00, 0x00, 0x00, 0x01, 0x3F, 0xFF, 0xFF, 0xFF, 0xF0, 0xC0,
    0x80, 0x00, 0x00, 0x00, 0x07, 0x07, 0x87, 0x87, 0xC7, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x03, 0x03, 0x03, 0x07, 0x07, 0x0F, 0x0F, 0x0F, 0x1F, 0x1F,
    0x1F, 0x1F, 0x3E, 0x3E, 0x3E, 0x3E, 0x3E, 0x3E, 0x3E, 0x3E, 0x3E, 0x3E, 0x3E, 0x1F, 0x1F, 0x1F,
    0x1F, 0x0F, 0x0F, 0x0F, 0x07, 0x07, 0x07, 0x03, 0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x07, 0x07, 0x07,
    0x07, 0x06, 0x04, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x07, 0x07, 0x07, 0x06, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x03, 0x07, 0x07, 0x07, 0x07, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x0F, 0x0F, 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x07, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F,
    0x0F, 0x07, 0x07, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x0F, 0x0F, 0x0F, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x0F, 0x0F, 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x0F, 0x0F, 0x0F,
    0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x07, 0x0F, 0x0F, 0x0F,
    0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x07, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F,
    0x07, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x07,
    0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x07, 0x07, 0x03, 0x03, 0x01, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x0F, 0x0F, 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

};


void Print_ReceiptHis(int mi){
	BYTE baTemp[384 * 64]; // The width of paper is 384 dot.

    //Font atrributes
    CTOS_FONT_ATTRIB stFONT_ATTRIB;

    //Auxiliar char buffer
    UCHAR charBuffer[50];

    // Auxiliar PAN number
    UCHAR applicationAIDAux[40];

    // Auxiliar PAN number
    UCHAR PANNumberAux[40];

    // Lenght of PAN number
    BYTE lenghtPANNumber;

    BYTE Timer_printSTR[40] = {0};
	
	CTOS_RTC stRTC;

    CTOS_PrinterFline(5);
	
	//Print out the bank logo
    CTOS_PrinterLogo((BYTE *) baPrinterBufferLogo_Receipt3, 0, 380, 10);
    CTOS_PrinterFline(12);

    stFONT_ATTRIB.X_Space = 0;
    //The height of the space between the font with next font
    stFONT_ATTRIB.Y_Space = 0;
    memset(baTemp, 0x00, sizeof (baTemp));
    stFONT_ATTRIB.FontSize = d_FONT_8x16;
    //Double de X size
    stFONT_ATTRIB.X_Zoom = 3;
    //Double de Y size
    stFONT_ATTRIB.Y_Zoom = 4;
    //The width of the space between the font with next font
    CTOS_PrinterBufferPutString((BYTE *) baTemp, 0, 0, (BYTE *) "VEGA3000", &stFONT_ATTRIB);
    CTOS_PrinterBufferOutput((BYTE *) baTemp, 6);
    CTOS_PrinterFline(20);
	
    //==============================
    //Print out the transaction data
    //==============================
    CTOS_PrinterPutString((BYTE *) "MER ID: 886289131771");
    CTOS_PrinterFline(5);
    strcpy((char *) applicationAIDAux, "BATCH NO: 000307");
    CTOS_PrinterPutString(applicationAIDAux);
    CTOS_PrinterFline(5);

    
    stFONT_ATTRIB.FontSize = d_FONT_8x16;
    stFONT_ATTRIB.X_Zoom = 2;
    stFONT_ATTRIB.Y_Zoom = 2;

    CTOS_PrinterPutString((unsigned char *) "CARD NO:");
    CTOS_PrinterFline(12);

    lenghtPANNumber = strlen("  ********************");
	
	memset(baTemp, 0x00, sizeof (baTemp));
    CTOS_PrinterBufferPutString((BYTE *) baTemp, 0, 0, TransHis[TransHisCount - mi].CardNO, &stFONT_ATTRIB);
    CTOS_PrinterBufferOutput((BYTE *) baTemp, 8);

    CTOS_PrinterPutString(TransHis[TransHisCount - mi].ExpDate);
    CTOS_PrinterFline(5);
    CTOS_PrinterPutString((BYTE *) "ISSUER: 84188062");
    CTOS_PrinterFline(15);
	
	memset(baTemp, 0x00, sizeof (baTemp));
    stFONT_ATTRIB.FontSize = d_FONT_8x16;
    stFONT_ATTRIB.X_Zoom = 3;
    stFONT_ATTRIB.Y_Zoom = 2;
    CTOS_PrinterBufferPutString((BYTE *) baTemp, 0, 0, (BYTE *) "       BOOK/SALE", &stFONT_ATTRIB);
    CTOS_PrinterBufferOutput((BYTE *) baTemp, 6);
    CTOS_PrinterFline(12);

    CTOS_PrinterPutString((BYTE *) "TERM ID: 11010001   OPER ID: 002");
    CTOS_PrinterFline(5);

    CTOS_PrinterPutString((BYTE *) TransHis[TransHisCount - mi].TransTime);

    CTOS_PrinterFline(5);
    CTOS_PrinterPutString((BYTE *) "REF NO: 855090913452");
    CTOS_PrinterFline(15);


	CTOS_PrinterFontSelectMode(d_FONT_TTF_MODE);
	CTOS_PrinterTTFSelect("arial.ttf", 0);
	int i, j;
	i = TransHis[TransHisCount - mi].Trans_Amount / 100;
	j = TransHis[TransHisCount - mi].Trans_Amount % 100;
	if(i == 0){
		if(Dollar_Sign == 1)
			sprintf((char *) charBuffer, "      $ 0.%02d", j);
		else if(Dollar_Sign == 2)
			sprintf((char *) charBuffer, "      € 0.%02d", j);
	}
		//sprintf((char *) charBuffer, "      $ 0.%02d", j);
	else{
		if(Dollar_Sign == 1)
			sprintf((char *) charBuffer, "      $ %d.%02d", i, j);
		else if(Dollar_Sign == 2)
			sprintf((char *) charBuffer, "      € %d.%02d", i, j);
	}
		//sprintf((char *) charBuffer, "      $ %d.%02d", i, j);
    stFONT_ATTRIB.FontSize = d_FONT_12x24;
    stFONT_ATTRIB.X_Zoom = 3;
    stFONT_ATTRIB.Y_Zoom = 2;
    memset(baTemp, 0x00, sizeof (baTemp));
    CTOS_PrinterBufferPutString((BYTE *) baTemp, 0, 0, (BYTE *) charBuffer, &stFONT_ATTRIB);
    CTOS_PrinterBufferOutput((BYTE *) baTemp, 6);

	if(TransHis[TransHisCount - mi].Type == 2){
		CTOS_PrinterBMPPic(0, TransHis[TransHisCount].Signature);
	}
	
    CTOS_PrinterFline(40);
    CTOS_PrinterPutString((BYTE *) "===== CARDHOLDER SIGNATURE =====");
    CTOS_PrinterFline(40);

    CTOS_PrinterPutString((BYTE *) "\n\n");

}
/** 
** The main entry of the terminal application 
**/
EMVCL_INIT_DATA emvcl_initdat;

int main(int argc,char *argv[])
{
	BYTE            key;
	BYTE            key2;
	BYTE			bKey;
	BYTE            buffer[32];
	CTOS_RTC        RTC;
	BOOL            TransactionFlag;
	BOOL            HistoryFlag;
	BOOL            ExitFlag;
	char            TransAmount[16];
	int             TALen;
	ULONG           ulAmount;
	ULONG			ulRtn;
	
	CTOS_LCDTClearDisplay();
        TransHisCount = 0;

	//Init EMVCL
	emvcl_initdat.stOnEvent.OnCancelTransaction = CancelTransactionEvent2;
    emvcl_initdat.stOnEvent.OnShowMessage = ShowMessageEvent2;
    emvcl_initdat.bConfigFilenameLen = strlen("emvcl_config.xml");
    emvcl_initdat.pConfigFilename = "emvcl_config.xml";
    ulRtn = EMVCL_Initialize(&emvcl_initdat);
    if (ulRtn != 0) {
        ShowRtn(4, "EMVCL Init Fail ", ulRtn);
        CTOS_KBDGet(&bKey);
        return;
    }
	
	//Select UI
	CTOS_LCDFontSelectMode(d_FONT_TTF_MODE);
	CTOS_LCDTTFSelect("kaiu.ttf", 0);//
	
UI_Select:	
	CTOS_LCDGShowBMPPic(0, 0, "UI_Select.bmp");
	CTOS_KBDGet(&bKey);
	
	if(bKey == d_KBD_1){
		EMVCL_SetUIType(d_EMVCL_UITYPE_1);
		Dollar_Sign = 1;
	}else if(bKey == d_KBD_2){
		EMVCL_SetUIType(d_EMVCL_UITYPE_2);
		Dollar_Sign = 2;
	}else if(bKey == d_KBD_CANCEL){
		return 0;
	}else{
		goto UI_Select;
	}


MainScreen:
	TransactionFlag = FALSE;
	HistoryFlag = FALSE;
	ExitFlag = FALSE;
	
	CTOS_LCDGShowBMPPic(0, 0, "Welcome.bmp");
	CTOS_LCDGShowBMPPic(60, 190, "Transaction.bmp");
	CTOS_LCDGShowBMPPic(60, 250, "TransHistory.bmp");

	CTOS_Delay(100);
	while(key != d_KBD_CANCEL){
		CTOS_KBDHit(&key);
		
		CTOS_RTCGet(&RTC);
		sprintf(buffer, "%02d:%02d", RTC.bHour, RTC.bMinute);
		CTOS_LCDTPrintXY(16, 1, buffer);

		TouchSensor1();
		
		if(TransFlag){//TouchSensorEx(60, 260, 190, 230) == TRUE
			TransactionFlag = TRUE;
			TransFlag = 0;
			close(fd);
			CTOS_Beep();
			CTOS_LCDGShowBMPPic(60, 190, "Transaction_pressed.bmp");
			CTOS_Delay(20);
			CTOS_LCDGShowBMPPic(60, 190, "Transaction.bmp");
			break;
		}
		
		if(HisFlag){//TouchSensorEx(60, 260, 250, 290) == TRUE
			HistoryFlag = TRUE;
			HisFlag = 0;
			close(fd);
			CTOS_Beep();
			CTOS_LCDGShowBMPPic(60, 250, "TransHistory_Pressed.bmp");
			CTOS_Delay(20);
			CTOS_LCDGShowBMPPic(60, 250, "TransHistory.bmp");
			break;
		}
		
	}

	if(TransactionFlag){
		CTOS_LCDGShowBMPPic(0, 0, "TransInput_.bmp");
		EMVCL_StartIdleLEDBehavior(NULL);
		
		CTOS_LCDTPrintXY(1, 6, " Enter Amount: ");
		//CTOS_LCDTPrintXY(1, 7, "   $          0.00  ");
		if(Dollar_Sign == 1)
			CTOS_LCDTPrintXY(1, 7, "   $          0.00  ");
		else if(Dollar_Sign == 2)
			CTOS_LCDTPrintXY(1, 7, "   €         0.00  ");
		
		memset(TransAmount, 0x00, sizeof(TransAmount));
		TALen = 0;
		
		while(1){
			CTOS_KBDHit(&key2);
			
			TouchSensor2();

			CTOS_RTCGet(&RTC);
			sprintf(buffer, "%02d:%02d", RTC.bHour, RTC.bMinute);
			
			if((key2 == d_KBD_CLEAR) || (CurrentFlag == 0x11)){//TouchSensorEx(25, 115, 400, 460) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(25, 400, "BackSpace_Ori.bmp");
				CTOS_Delay(10);

				CTOS_LCDGShowBMPPic(25, 400, "BackSpace_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				//CTOS_LCDTPrintXY(1, 7, "   $          0.00  ");
				if(Dollar_Sign == 1)
					CTOS_LCDTPrintXY(1, 7, "   $          0.00  ");
				else if(Dollar_Sign == 2)
					CTOS_LCDTPrintXY(1, 7, "   €         0.00  ");
				if(TALen > 0){
					TransAmount[--TALen] = 0x00;
					ShowAmount(TransAmount);
				}
				key2 = 0x00;
				CurrentFlag == 0x00;
				TouchPressFlag = 0;
			}
			
			
			if((key2 == d_KBD_1) || (CurrentFlag == 0x01)){//TouchSensorEx(25, 115, 220, 280) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(25, 220, "1_Ori.bmp");
				CTOS_Delay(10);
				CTOS_LCDGShowBMPPic(25, 220, "1_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				if(TALen == 12){
					DigitFull();
					continue;
				}
				TransAmount[TALen++] = '1';
				ShowAmount(TransAmount);
				key2 = 0x00;
			}
			if((key2 == d_KBD_2) || (CurrentFlag == 0x02)){//TouchSensorEx(115, 205, 220, 280) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(115, 220, "2_Ori.bmp");
				CTOS_Delay(10);
				CTOS_LCDGShowBMPPic(115, 220, "2_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				if(TALen == 12){
					DigitFull();
					continue;
				}
				TransAmount[TALen++] = '2';
				ShowAmount(TransAmount);
				key2 = 0x00;
			}
			if((key2 == d_KBD_3) || (CurrentFlag == 0x03)){//TouchSensorEx(205, 295, 220, 280) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(205, 220, "3_Ori.bmp");
				CTOS_Delay(10);
				CTOS_LCDGShowBMPPic(205, 220, "3_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				if(TALen == 12){
					DigitFull();
					continue;
				}
				TransAmount[TALen++] = '3';
				ShowAmount(TransAmount);
				key2 = 0x00;
			}
			if((key2 == d_KBD_4) || (CurrentFlag == 0x04)){//TouchSensorEx(25, 115, 280, 340) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(25, 280, "4_Ori.bmp");
				CTOS_Delay(10);
				CTOS_LCDGShowBMPPic(25, 280, "4_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				if(TALen == 12){
					DigitFull();
					continue;
				}
				TransAmount[TALen++] = '4';
				ShowAmount(TransAmount);
				key2 = 0x00;
			}
			if((key2 == d_KBD_5) || (CurrentFlag == 0x05)){//TouchSensorEx(115, 205, 280, 340) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(115, 280, "5_Ori.bmp");
				CTOS_Delay(10);
				CTOS_LCDGShowBMPPic(115, 280, "5_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				if(TALen == 12){
					DigitFull();
					continue;
				}
				TransAmount[TALen++] = '5';
				ShowAmount(TransAmount);
				key2 = 0x00;
			}
			if((key2 == d_KBD_6) || (CurrentFlag == 0x06)){//TouchSensorEx(205, 295, 280, 340) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(205, 280, "6_Ori.bmp");
				CTOS_Delay(10);
				CTOS_LCDGShowBMPPic(205, 280, "6_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				if(TALen == 12){
					DigitFull();
					continue;
				}
				TransAmount[TALen++] = '6';
				ShowAmount(TransAmount);
				key2 = 0x00;
			}
			if((key2 == d_KBD_7) || (CurrentFlag == 0x07)){//TouchSensorEx(25, 115, 340, 400) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(25, 340, "7_Ori.bmp");
				CTOS_Delay(10);
				CTOS_LCDGShowBMPPic(25, 340, "7_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				if(TALen == 12){
					DigitFull();
					continue;
				}
				TransAmount[TALen++] = '7';
				ShowAmount(TransAmount);
				key2 = 0x00;
			}
			if((key2 == d_KBD_8) || (CurrentFlag == 0x08)){//TouchSensorEx(115, 205, 340, 400) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(115, 340, "8_Ori.bmp");
				CTOS_Delay(10);
				CTOS_LCDGShowBMPPic(115, 340, "8_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				if(TALen == 12){
					DigitFull();
					continue;
				}
				TransAmount[TALen++] = '8';
				ShowAmount(TransAmount);
				key2 = 0x00;
			}
			if((key2 == d_KBD_9) || (CurrentFlag == 0x09)){//TouchSensorEx(205, 295, 340, 400) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(205, 340, "9_Ori.bmp");
				CTOS_Delay(10);
				CTOS_LCDGShowBMPPic(205, 340, "9_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				if(TALen == 12){
					DigitFull();
					continue;
				}
				TransAmount[TALen++] = '9';
				ShowAmount(TransAmount);
				key2 = 0x00;
			}
			if((key2 == d_KBD_0) || (CurrentFlag == 0x10)){//TouchSensorEx(115, 205, 400, 460) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(115, 400, "0_Ori.bmp");
				CTOS_Delay(10);
				CTOS_LCDGShowBMPPic(115, 400, "0_.bmp");

				//CTOS_LCDTPrintXY(1, 6, " Enter Sale Amount: ");
				if(TALen == 12){
					DigitFull();
					continue;
				}
				if(TALen != 0){
					TransAmount[TALen++] = '0';
					ShowAmount(TransAmount);
				}
				key2 = 0x00;
			}
			if((key2 == d_KBD_ENTER) || (CurrentFlag == 0x12)){//TouchSensorEx(205, 295, 400, 460) == TRUE
				CTOS_Beep();
				CTOS_LCDGShowBMPPic(205, 400, "OK_Ori.bmp");
				if(TALen > 0){
					int i = 1;
					ulAmount = 0;
					
					while(TALen > 0){
						ulAmount = (TransAmount[--TALen]-'0')*i + ulAmount;
						i *= 10;
					}

					//enter transaction
					Transaction(ulAmount);
					memset(TransAmount, 0x00, sizeof(TransAmount));
					TALen = 0;
					
				}
				CTOS_LCDGShowBMPPic(0, 0, "TransInput_.bmp");
				//EMVCL_ShowVirtualLED(NULL);
				//EMVCL_SetLED(0x0F, 0x08);
				EMVCL_StartIdleLEDBehavior(NULL);
				CTOS_LCDTPrintXY(1, 6, " Enter Amount: ");
				//CTOS_LCDTPrintXY(1, 7, "   $                ");
				if(Dollar_Sign == 1)
					CTOS_LCDTPrintXY(1, 7, "   $          0.00  ");
				else if(Dollar_Sign == 2)
					CTOS_LCDTPrintXY(1, 7, "   €         0.00  ");
				key2 = 0x00;
			}
			
			if(key2 == d_KBD_CANCEL)
				goto MainScreen;
		}
	}

	if(HistoryFlag){
		if(TransHisCount == 0){
			CTOS_LCDGShowBMPPic(0, 0, "Welcome.bmp");
			sprintf(buffer, "No Trans Exist!");
			CTOS_LCDTPrintXY(1, 3, buffer);
			CTOS_Delay(500);
			goto MainScreen;
		}else{
TransHisScreen:
			CTOS_LCDGShowBMPPic(0, 0, "Welcome.bmp");
			CTOS_LCDGShowBMPPic(60, 160, "LastTrans.bmp");
			CTOS_LCDGShowBMPPic(60, 210, "TransBL.bmp");
			CTOS_LCDGShowBMPPic(60, 260, "TransBTBLT.bmp");
			CTOS_LCDGShowBMPPic(60, 310, "MainMenu.bmp");
			
			while(key != d_KBD_CANCEL){
				CTOS_KBDHit(&key);
				
				TouchSensor3();
				
				CTOS_RTCGet(&RTC);
				sprintf(buffer, "%02d:%02d", RTC.bHour, RTC.bMinute);
				CTOS_LCDTPrintXY(16, 1, buffer);
				
				if(HisFlag2 == 0x01){//LastTrans
					close(fd);
					CTOS_Beep();
					CTOS_LCDGShowBMPPic(60, 160, "LastTrans_Pressed.bmp");
					CTOS_Delay(20);
					CTOS_LCDGShowBMPPic(60, 160, "LastTrans.bmp");
					if(TransHisCount > 0){
						Print_ReceiptHis(1);
					}
					goto TransHisScreen;
				}
				
				if(HisFlag2 == 0x02){//TouchSensorEx(60, 260, 210, 250) == TRUE
					close(fd);
					CTOS_Beep();
					CTOS_LCDGShowBMPPic(60, 210, "TransBL_Pressed.bmp");
					CTOS_Delay(20);
					CTOS_LCDGShowBMPPic(60, 210, "TransBL.bmp");
					if(TransHisCount > 1){
						Print_ReceiptHis(2);
					}else{
						CTOS_LCDGShowBMPPic(0, 0, "Welcome.bmp");
						sprintf(buffer, "Current Trans : %d", TransHisCount);
						CTOS_LCDGShowBMPPic(0, 9, buffer);
						CTOS_Delay(500);
					}
					goto TransHisScreen;
				}

				if(HisFlag2 == 0x03){//TouchSensorEx(60, 260, 260, 300) == TRUE
					close(fd);
					CTOS_Beep();
					CTOS_LCDGShowBMPPic(60, 260, "TransBTBLT_Pressed.bmp");
					CTOS_Delay(20);
					CTOS_LCDGShowBMPPic(60, 260, "TransBTBLT.bmp");
					if(TransHisCount > 2){
						Print_ReceiptHis(3);
					}else{
						CTOS_LCDGShowBMPPic(0, 0, "Welcome.bmp");
						sprintf(buffer, "Current Trans : %d", TransHisCount);
						CTOS_LCDGShowBMPPic(0, 9, buffer);
						CTOS_Delay(500);
					}
					goto TransHisScreen;
				}
				
				if(HisFlag2 == 0x04){//TouchSensorEx(60, 260, 310, 350) == TRUE
					close(fd);
					CTOS_Beep();
					CTOS_LCDGShowBMPPic(60, 310, "MainMenu_Pressed.bmp");
					CTOS_Delay(20);
					CTOS_LCDGShowBMPPic(60, 310, "MainMenu.bmp");
					CTOS_Delay(20);
					goto MainScreen;
					break;
				}
				
				close(fd);
			}
		}
	}
	if(ExitFlag){
		;
	}
        
	exit(0);
}
